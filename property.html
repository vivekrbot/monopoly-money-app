<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Available Property - Monopoly Money</title>
  
  <!-- Google Material Symbols -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #F5F5F5;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
    }

    .header {
      margin-bottom: 30px;
    }

    .back-btn {
      width: 48px;
      height: 48px;
      background: white;
      border: none;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      background: #F9FAFB;
      transform: translateX(-4px);
    }

    .back-btn .material-symbols-rounded {
      font-size: 24px;
      color: #1F2937;
    }

    .page-title {
      font-size: 28px;
      font-weight: 600;
      color: #1F2937;
      margin-bottom: 8px;
    }

    .page-subtitle {
      font-size: 16px;
      color: #9CA3AF;
    }

    .property-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .property-card {
      background: #FDE047;
      border: 2px solid #1F2937;
      border-radius: 16px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .property-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    .property-header {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .property-icon {
      font-size: 28px;
      color: #1F2937;
    }

    .property-name {
      font-size: 18px;
      font-weight: 600;
      color: #1F2937;
    }

    .property-details {
      display: none;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 2px solid rgba(0, 0, 0, 0.1);
      background: white;
      margin: 24px -24px -24px;
      padding: 24px;
      border-radius: 0 0 14px 14px;
    }

    .property-card.expanded .property-details {
      display: block;
    }

    .detail-section {
      margin-bottom: 20px;
    }

    .detail-section:last-child {
      margin-bottom: 0;
    }

    .detail-title {
      font-size: 14px;
      font-weight: 700;
      color: #1F2937;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 15px;
      color: #1F2937;
    }

    .detail-row.highlight {
      color: #EF4444;
      font-weight: 600;
    }

    .detail-label {
      color: #6B7280;
    }

    .detail-value {
      font-weight: 600;
      text-align: right;
    }

    .detail-row.highlight .detail-value {
      color: #EF4444;
    }

    .divider {
      height: 1px;
      background: #E5E7EB;
      margin: 12px 0;
    }

    .sell-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid #E5E7EB;
    }

    .sell-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    .sell-btn {
      background: #10B981;
      border: none;
      border-radius: 12px;
      padding: 16px;
      font-size: 16px;
      font-weight: 600;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .sell-btn:hover {
      background: #059669;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .sell-btn:disabled {
      background: #D1D5DB;
      cursor: not-allowed;
      transform: none;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #1F2937;
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 500;
      z-index: 2000;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .toast.show {
      display: block;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <button class="back-btn" onclick="window.history.back()">
        <span class="material-symbols-rounded">arrow_back</span>
      </button>
      <h1 class="page-title">Available Property</h1>
      <p class="page-subtitle">Manage By Bank</p>
    </div>

    <div class="property-list" id="propertyList">
      <!-- Properties will be dynamically inserted here -->
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDrPA---Ak_l9jqwHouWiC2byZH6EdR9Ts",
  authDomain: "monopolymoneyapp.firebaseapp.com",
  databaseURL: "https://monopolymoneyapp-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "monopolymoneyapp",
  storageBucket: "monopolymoneyapp.firebasestorage.app",
  messagingSenderId: "734008146391",
  appId: "1:734008146391:web:8ebbf21a9c324b25587392",
  measurementId: "G-3377SYGJYX"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>
  
  <script>
    let roomId = new URLSearchParams(window.location.search).get('room');
    let player1Name = 'Player 1';
    let player2Name = 'Player 2';
    const PROPERTY_PRICE = 400;

    if (!roomId) {
      alert('Room ID not found');
      window.history.back();
    }

    // Load player names
    database.ref(`rooms/${roomId}/player1/name`).once('value', (snapshot) => {
      if (snapshot.val()) {
        player1Name = snapshot.val();
        updatePlayerButtons();
      }
    });

    database.ref(`rooms/${roomId}/player2/name`).once('value', (snapshot) => {
      if (snapshot.val()) {
        player2Name = snapshot.val();
        updatePlayerButtons();
      }
    });

    function updatePlayerButtons() {
      document.querySelectorAll('.sell-btn[data-player="player1"]').forEach(btn => {
        btn.textContent = player1Name;
      });
      document.querySelectorAll('.sell-btn[data-player="player2"]').forEach(btn => {
        btn.textContent = player2Name;
      });
    }

    // Complete Monopoly properties organized by color groups
    // Replace the propertyGroups array with this updated version:

const propertyGroups = [
  {
    color: "#FFEF3B",
    colorName: "Yellow",
    properties: [
      { id: "piccadilly", name: "PICCADILLY", rentSiteOnly: 24, rent1House: 120, rent2House: 360, rent3House: 850, rent4House: 1025, rentHotel: 1200, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 140, propertyValue: 280 },
      { id: "leicester", name: "LEICESTER SQUARE", rentSiteOnly: 22, rent1House: 110, rent2House: 330, rent3House: 800, rent4House: 975, rentHotel: 1150, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 130, propertyValue: 260 },
      { id: "coventry", name: "COVENTRY STREET", rentSiteOnly: 22, rent1House: 110, rent2House: 330, rent3House: 800, rent4House: 975, rentHotel: 1150, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 130, propertyValue: 260 }
    ]
  },
  {
    color: "#8B4513",
    colorName: "Brown",
    properties: [
      { id: "oldkent", name: "OLD KENT ROAD", rentSiteOnly: 2, rent1House: 10, rent2House: 30, rent3House: 90, rent4House: 160, rentHotel: 250, costPerHouse: 50, hotelCost: "₹ 50 + 4Houses", mortgageValue: 30, propertyValue: 60 },
      { id: "whitechapel", name: "WHITECHAPEL ROAD", rentSiteOnly: 4, rent1House: 20, rent2House: 60, rent3House: 180, rent4House: 320, rentHotel: 450, costPerHouse: 50, hotelCost: "₹ 50 + 4Houses", mortgageValue: 30, propertyValue: 60 }
    ]
  },
  {
    color: "#0080FF",
    colorName: "Blue",
    properties: [
      { id: "parklane", name: "PARK LANE", rentSiteOnly: 35, rent1House: 175, rent2House: 500, rent3House: 1100, rent4House: 1300, rentHotel: 1500, costPerHouse: 200, hotelCost: "₹ 200 + 4Houses", mortgageValue: 175, propertyValue: 350 },
      { id: "mayfair", name: "MAYFAIR", rentSiteOnly: 50, rent1House: 200, rent2House: 600, rent3House: 1400, rent4House: 1700, rentHotel: 2000, costPerHouse: 200, hotelCost: "₹ 200 + 4Houses", mortgageValue: 200, propertyValue: 400 }
    ]
  },
  {
    color: "#FF62ED",
    colorName: "Pink",
    properties: [
      { id: "northumberland", name: "NORTHUMBERLAND AVENUE", rentSiteOnly: 12, rent1House: 60, rent2House: 180, rent3House: 500, rent4House: 700, rentHotel: 900, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 80, propertyValue: 160 },
      { id: "whitehall", name: "WHITEHALL", rentSiteOnly: 10, rent1House: 50, rent2House: 150, rent3House: 450, rent4House: 625, rentHotel: 750, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 70, propertyValue: 140 },
      { id: "pallmall", name: "PALL MALL", rentSiteOnly: 10, rent1House: 50, rent2House: 150, rent3House: 450, rent4House: 625, rentHotel: 750, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 70, propertyValue: 140 }
    ]
  },
  {
    color: "#7DF0FF",
    colorName: "Light Blue",
    properties: [
      { id: "pentonville", name: "PENTONVILLE ROAD", rentSiteOnly: 8, rent1House: 40, rent2House: 100, rent3House: 300, rent4House: 450, rentHotel: 600, costPerHouse: 50, hotelCost: "₹ 50 + 4Houses", mortgageValue: 60, propertyValue: 120 },
      { id: "angel", name: "THE ANGEL, ISLINGTON", rentSiteOnly: 6, rent1House: 30, rent2House: 90, rent3House: 270, rent4House: 400, rentHotel: 550, costPerHouse: 50, hotelCost: "₹ 50 + 4Houses", mortgageValue: 50, propertyValue: 100 },
      { id: "euston", name: "EUSTON ROAD", rentSiteOnly: 6, rent1House: 30, rent2House: 90, rent3House: 270, rent4House: 400, rentHotel: 550, costPerHouse: 50, hotelCost: "₹ 50 + 4Houses", mortgageValue: 50, propertyValue: 100 }
    ]
  },
  {
    color: "#00A277",
    colorName: "Green",
    properties: [
      { id: "regent", name: "REGENT STREET", rentSiteOnly: 26, rent1House: 130, rent2House: 390, rent3House: 900, rent4House: 1100, rentHotel: 1275, costPerHouse: 200, hotelCost: "₹ 200 + 4Houses", mortgageValue: 150, propertyValue: 300 },
      { id: "oxford", name: "OXFORD STREET", rentSiteOnly: 26, rent1House: 130, rent2House: 390, rent3House: 900, rent4House: 1100, rentHotel: 1275, costPerHouse: 200, hotelCost: "₹ 200 + 4Houses", mortgageValue: 150, propertyValue: 300 },
      { id: "bond", name: "BOND STREET", rentSiteOnly: 28, rent1House: 150, rent2House: 450, rent3House: 1000, rent4House: 1200, rentHotel: 1400, costPerHouse: 200, hotelCost: "₹ 200 + 4Houses", mortgageValue: 160, propertyValue: 320 }
    ]
  },
  {
    color: "#FF3235",
    colorName: "Red",
    properties: [
      { id: "fleet", name: "FLEET STREET", rentSiteOnly: 18, rent1House: 90, rent2House: 250, rent3House: 700, rent4House: 875, rentHotel: 1050, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 110, propertyValue: 220 },
      { id: "strand", name: "STRAND", rentSiteOnly: 18, rent1House: 90, rent2House: 250, rent3House: 700, rent4House: 875, rentHotel: 1050, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 110, propertyValue: 220 },
      { id: "trafalgar", name: "TRAFALGAR SQUARE", rentSiteOnly: 20, rent1House: 100, rent2House: 300, rent3House: 750, rent4House: 925, rentHotel: 1100, costPerHouse: 150, hotelCost: "₹ 150 + 4Houses", mortgageValue: 120, propertyValue: 240 }
    ]
  },
  {
    color: "#FFA500",
    colorName: "Orange",
    properties: [
      { id: "marlborough", name: "MARLBOROUGH STREET", rentSiteOnly: 14, rent1House: 70, rent2House: 200, rent3House: 550, rent4House: 750, rentHotel: 950, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 90, propertyValue: 180 },
      { id: "bow", name: "BOW STREET", rentSiteOnly: 14, rent1House: 70, rent2House: 200, rent3House: 550, rent4House: 750, rentHotel: 950, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 90, propertyValue: 180 },
      { id: "vine", name: "VINE STREET", rentSiteOnly: 16, rent1House: 80, rent2House: 220, rent3House: 600, rent4House: 800, rentHotel: 1000, costPerHouse: 100, hotelCost: "₹ 100 + 4Houses", mortgageValue: 100, propertyValue: 200 }
    ]
  },
  {
    color: "#E0E0E0",
    colorName: "Stations",
    properties: [
      { id: "fenchurch", name: "FENCHURCH STREET", rentSiteOnly: 25, rent2Stations: 50, rent3Stations: 100, rent4Stations: 200, mortgageValue: 100, propertyValue: 200, isStation: true },
      { id: "liverpool", name: "LIVERPOOL STREET", rentSiteOnly: 25, rent2Stations: 50, rent3Stations: 100, rent4Stations: 200, mortgageValue: 100, propertyValue: 200, isStation: true },
      { id: "marylebone", name: "MARYLEBONE", rentSiteOnly: 25, rent2Stations: 50, rent3Stations: 100, rent4Stations: 200, mortgageValue: 100, propertyValue: 200, isStation: true },
      { id: "kingscross", name: "KINGS CROSS", rentSiteOnly: 25, rent2Stations: 50, rent3Stations: 100, rent4Stations: 200, mortgageValue: 100, propertyValue: 200, isStation: true }
    ]
  },
  {
    color: "#FFFFFF",
    colorName: "Utilities",
    properties: [
      { id: "electric", name: "ELECTRIC COMPANY", description: "If One 'Utility' is owned, rent is 4 times amount shown on dice.", description2: "If Both 'Utilities' are owned, rent is 10 times amount shown on dice.", mortgageValue: 75, propertyValue: 150, isUtility: true },
      { id: "water", name: "WATER WORKS", description: "If One 'Utility' is owned, rent is 4 times amount shown on dice.", description2: "If Both 'Utilities' are owned, rent is 10 times amount shown on dice.", mortgageValue: 75, propertyValue: 150, isUtility: true }
    ]
  }
];
    function formatCurrency(amount) {
      return `₹ ${amount}`;
    }

    function formatNumber(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function getPropertyIcon(property) {
      if (property.isStation) return 'train';
      if (property.isUtility) return property.name.includes('ELECTRIC') ? 'bolt' : 'water_drop';
      return 'apartment';
    }

    function createPropertyCard(property, color, globalIndex) {
      const icon = getPropertyIcon(property);
      let detailsHTML = '';
      
      if (property.isStation) {
        detailsHTML = `
          <div class="detail-section">
            <div class="detail-title">Title Deed</div>
            <div class="detail-row">
              <span class="detail-label">Rent</span>
              <span class="detail-value">${formatCurrency(property.rentSiteOnly)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 2 Stations</span>
              <span class="detail-value">${formatCurrency(property.rent2Stations)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 3 Stations</span>
              <span class="detail-value">${formatCurrency(property.rent3Stations)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 4 Stations</span>
              <span class="detail-value">${formatCurrency(property.rent4Stations)}</span>
            </div>
            <div class="divider"></div>
            <div class="detail-row highlight">
              <span class="detail-label">Mortgage Value</span>
              <span class="detail-value">${formatCurrency(property.mortgageValue)}</span>
            </div>
          </div>
        `;
      } else if (property.isUtility) {
        detailsHTML = `
          <div class="detail-section">
            <div class="detail-title">Title Deed</div>
            <div style="margin-bottom: 12px; font-size: 13px; line-height: 1.5; color: #6B7280;">
              ${property.description}
            </div>
            <div style="margin-bottom: 12px; font-size: 13px; line-height: 1.5; color: #6B7280;">
              ${property.description2}
            </div>
            <div class="divider"></div>
            <div class="detail-row highlight">
              <span class="detail-label">Mortgage Value</span>
              <span class="detail-value">${formatCurrency(property.mortgageValue)}</span>
            </div>
          </div>
        `;
      } else {
        detailsHTML = `
          <div class="detail-section">
            <div class="detail-title">Title Deed</div>
            <div class="detail-row">
              <span class="detail-label">Rent - Site Only</span>
              <span class="detail-value">${formatCurrency(property.rentSiteOnly)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 1 House</span>
              <span class="detail-value">${formatCurrency(property.rent1House)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 2 House</span>
              <span class="detail-value">${formatCurrency(property.rent2House)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 3 House</span>
              <span class="detail-value">${formatCurrency(property.rent3House)}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Rent - with 4 House</span>
              <span class="detail-value">${formatCurrency(property.rent4House)}</span>
            </div>
            <div class="detail-row highlight">
              <span class="detail-label">Rent - with Hotel</span>
              <span class="detail-value">${formatCurrency(property.rentHotel)}</span>
            </div>
          </div>
          <div class="divider"></div>
          <div class="detail-section">
            <div class="detail-row">
              <span class="detail-label">Cost of Houses</span>
              <span class="detail-value">${formatCurrency(property.costPerHouse)}/Per</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Cost of Hotel</span>
              <span class="detail-value">${property.hotelCost}</span>
            </div>
            <div class="detail-row highlight">
              <span class="detail-label">Mortgage Value</span>
              <span class="detail-value">${formatCurrency(property.mortgageValue)}</span>
            </div>
          </div>
        `;
      }
      
      return `
        <div class="property-card" style="background: ${color}; border-color: ${color === '#FFFFFF' || color === '#F5F5F5' ? '#1F2937' : color};" onclick="toggleProperty(${globalIndex})" id="property-${globalIndex}">
          <div class="property-header">
            <span class="material-symbols-rounded property-icon">${icon}</span>
            <span class="property-name">${property.name}</span>
          </div>
          
          <div class="property-details">
            ${detailsHTML}
            
            <div class="sell-section">
              <div class="detail-title">Sell To</div>
              <div class="sell-buttons">
                <button class="sell-btn" data-player="player1" onclick="sellProperty(event, '${property.id}', 'player1', '${property.name}', '${color}')">${player1Name}</button>
                <button class="sell-btn" data-player="player2" onclick="sellProperty(event, '${property.id}', 'player2', '${property.name}', '${color}')">${player2Name}</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // Track sold properties to hide them from bank
let soldProperties = new Set();

function loadSoldProperties() {
  const player1Ref = database.ref(`rooms/${roomId}/player1/properties`);
  const player2Ref = database.ref(`rooms/${roomId}/player2/properties`);
  
  player1Ref.on('value', () => updateSoldProperties());
  player2Ref.on('value', () => updateSoldProperties());
}

async function updateSoldProperties() {
  soldProperties.clear();
  
  const player1Snapshot = await database.ref(`rooms/${roomId}/player1/properties`).once('value');
  const player1Props = player1Snapshot.val();
  if (player1Props && Array.isArray(player1Props)) {
    player1Props.forEach(prop => {
      if (prop && prop.id) soldProperties.add(prop.id);
    });
  }
  
  const player2Snapshot = await database.ref(`rooms/${roomId}/player2/properties`).once('value');
  const player2Props = player2Snapshot.val();
  if (player2Props && Array.isArray(player2Props)) {
    player2Props.forEach(prop => {
      if (prop && prop.id) soldProperties.add(prop.id);
    });
  }
  
  renderProperties();
}

    function renderProperties() {
      const propertyList = document.getElementById('propertyList');
      let html = '';
      let globalIndex = 0;
      
      propertyGroups.forEach(group => {
        group.properties.forEach(property => {
          if (!soldProperties.has(property.id)) {
            html += createPropertyCard(property, group.color, globalIndex);
            globalIndex++;
          }
        });
      });
      
      propertyList.innerHTML = html;
    }

    function toggleProperty(index) {
      const card = document.getElementById(`property-${index}`);
      
      // Close all other cards
      document.querySelectorAll('.property-card').forEach((otherCard, otherIndex) => {
        if (otherIndex !== index) {
          otherCard.classList.remove('expanded');
        }
      });
      
      // Toggle current card
      card.classList.toggle('expanded');
    }

async function sellProperty(event, propertyId, playerKey, propertyName, propertyColor) {
  event.stopPropagation();
  
  const playerRef = database.ref(`rooms/${roomId}/${playerKey}`);
  const playerSnapshot = await playerRef.once('value');
  const playerData = playerSnapshot.val();
  
  if (!playerData || !playerData.name) {
    showToast('Player has not joined the room yet');
    return;
  }
  
  // Find property details
  let propertyDetails = null;
  propertyGroups.forEach(group => {
    const found = group.properties.find(p => p.id === propertyId);
    if (found) {
      // ADD THE COLOR HERE - spread the found property and add color from group
      propertyDetails = { ...found, color: group.color};
    }
  });
  
  if (!propertyDetails) {
    showToast('Property not found');
    return;
  }
  
  const PROPERTY_PRICE = propertyDetails.propertyValue;
  const currentBalance = playerData.balance ?? 3000;
  
  if (currentBalance < PROPERTY_PRICE) {
    showToast(`${playerData.name} has insufficient balance (₹${formatNumber(currentBalance)})`);
    return;
  }
  
  // Get current properties or initialize empty array
  const currentProperties = playerData.properties || [];
  
  // Check if property already owned
  const alreadyOwned = currentProperties.some(prop => prop.id === propertyId);
  if (alreadyOwned) {
    showToast(`${playerData.name} already owns ${propertyName}`);
    return;
  }
  
  // Deduct property price from player balance
  const newBalance = currentBalance - PROPERTY_PRICE;
  
  // Add property to player's portfolio
  currentProperties.push(propertyDetails);
  
  // Update Firebase
  await playerRef.update({
    balance: newBalance,
    properties: currentProperties
  });
  
  showToast(`Sold ${propertyName} to ${playerData.name} for ₹${formatNumber(PROPERTY_PRICE)}`);
}

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Initialize
    loadSoldProperties();
    renderProperties();
  </script>
</body>
</html>